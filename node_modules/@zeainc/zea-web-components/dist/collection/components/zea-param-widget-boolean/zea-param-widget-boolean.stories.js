import { storiesOf } from '@storybook/html'

storiesOf('Components/zea-param-widget-boolean', module).add('Default', () => {
  const { BooleanParameter } = globalThis.zeaEngine

  const booleanParameter = new BooleanParameter('Foo', false)
  const booleanParamWidget = document.createElement('zea-param-widget-boolean')
  booleanParamWidget.parameter = booleanParameter

  setTimeout(() => {
    booleanParameter.setValue(true)
  }, 5000)

  if (globalThis.zeaUx) {
    const { UndoRedoManager } = globalThis.zeaUx
    const undoRedoManager = UndoRedoManager.getInstance()

    document.addEventListener('keydown', (e) => {
      if ((e.metaKey || e.ctrlKey) && e.key === 'z') {
        undoRedoManager.undo()
      } else if ((e.metaKey || e.ctrlKey) && e.key === 'y') {
        undoRedoManager.redo()
      }
    })
  }

  return booleanParamWidget
})
