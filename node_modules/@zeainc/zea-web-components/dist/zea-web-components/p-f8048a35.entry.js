import{r as registerInstance,c as createEvent,h,a as getElement}from"./p-6fd09c7c.js";const zeaMenuItemCss="*{cursor:default;user-select:none}:host,input,button,select,textarea{font-family:'Roboto', sans-serif}.zea-menu-item{position:relative}.outer-wrap{display:flex;align-items:center;color:var(--color-foreground-1);position:relative}.toolbar .outer-wrap{background-color:transparent;border-radius:30px;margin:5px}.pressed .outer-wrap{background-color:var(--color-grey-3)}.active .outer-wrap{background-color:var(--color-grey-3)}.standalone:hover .outer-wrap{background-color:var(--color-grey-3)}.zea-menu-item:hover{background-color:var(--color-grey-3)}.zea-menu-item.toolbar:hover{background-color:transparent}.toolbar.pressed .outer-wrap{background-color:var(--color-background-2)}.toolbar.active .outer-wrap{background-color:var(--toolbar-active-bg-color, var(--color-grey-3));color:var(--toolbar-active-fg-color, var(--color-foreground-1))}.inner-wrap{display:flex;align-items:center;font-size:12px;padding:0 10px;min-height:40px;white-space:nowrap;flex-grow:1}zea-switch{margin-left:0.5em;pointer-events:none}zea-checkbox{margin-right:0.5em;pointer-events:none}::slotted(zea-icon){margin-right:5px;font-size:10px;pointer-events:none}.toolbar .inner-wrap{padding:5px;min-height:auto}.toolbar ::slotted(zea-icon){margin-right:0}.hotkey{display:block;opacity:0.75;font-size:0.8em;padding-left:10px;pointer-events:none}.keyboard-key{border:1px solid var(--color-grey-3);padding:2px;border-radius:5px;font-size:0.8em;text-align:center;min-width:10px;display:inline-block;background-color:var(--color-background-1);text-transform:uppercase;margin:0 2px}",ZeaMenuItem=class{constructor(t){registerInstance(this,t),this.zeaMenuItemClick=createEvent(this,"zeaMenuItemClick",7),this.zeaMenuItemPressed=createEvent(this,"zeaMenuItemPressed",7),this.switch=!1,this.active=!1,this.hasCheckbox=!1,this.hasRadio=!1,this.checked=!1,this.shown=!1,this.allowHover=!1,this.hotkey="",this.type="",this.hasSubitems=!1,this.isPushButton=!1}windowClickHandler(t){t.composedPath().includes(this.rootMenu)&&(this.active=!1,t.detail.active=!0,t.detail.hasSubitems||"toolbar"==this.type||(this.active=!1))}handleWindowMouseup(t){(this.isPushButton||!this.isDescendant(this.rootMenu,t.target)&&"toolbar"!=this.type)&&(this.active=!1)}handleWindowTouchend(t){(this.isPushButton||!this.isDescendant(this.rootMenu,t.target)&&"toolbar"!=this.type)&&(this.active=!1)}isDescendant(t,e){let s=e.parentNode;for(;null!=s;){if(s==t)return!0;s=s.parentNode}return!1}componentDidRender(){}watchHandler(){this.setupChildren()}setupChildren(){this.container.querySelector("slot").assignedElements().forEach(t=>{"ZEA-MENU-SUBITEMS"==t.tagName&&(this.hasSubitems=!0,this.subitemsElement=t,this.subitemsElement.rootMenu=this.rootMenu,this.subitemsElement.parentItem=this.hostElement,this.subitemsElement.type=this.hostElement.parentElement.type,this.outerWrap.appendChild(this.subitemsElement),this.container.classList.add("has-subitems"),"ZEA-MENU"==this.hostElement.parentElement.tagName&&(this.subitemsElement.belongsToRoot=!0))})}handleItemClick(t){this.zeaMenuItemClick.emit(this.hostElement),this.active=!0,this.runCallback(t)}handleItemMouseDown(){this.container.classList.add("pressed"),this.zeaMenuItemPressed.emit(this.hostElement),this.checked=!this.checked,this.isPushButton&&(this.active=!0)}handleItemMouseUp(t){this.container.classList.remove("pressed"),this.handleItemClick(t),this.hasSubitems||"toolbar"==this.type||(this.active=!1)}runCallback(payLoad){this.callback&&("string"==typeof this.callback?eval(this.callback):this.callback(payLoad))}keydownHandler(t){if(t.target instanceof HTMLInputElement)return;const e=[];t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.metaKey&&e.push("ctrl"),t.ctrlKey&&e.push("ctrl"),"Alt"!=t.key&&"Control"!=t.key&&"Ctrl"!=t.key&&"Shift"!=t.key&&e.push(t.key),e.join("+").toLowerCase()==this.hotkey.toLowerCase()&&this.handleItemClick(new MouseEvent("click")),t.preventDefault()}keyComboAsHtml(){const t=this.hotkey.split("+"),e=[];return t.forEach(t=>{"ctrl"==(t=t.toLowerCase())?(e.push(h("span",{class:"keyboard-key"},"Ctrl")),e.push("+")):"alt"==t?(e.push(h("span",{class:"keyboard-key"},"Alt")),e.push("+")):"shift"==t?(e.push(h("span",{class:"keyboard-key"},"Shift")),e.push("+")):e.push(h("span",{class:"keyboard-key"},t))}),e}render(){return h("div",{ref:t=>this.container=t,class:`zea-menu-item ${this.type} ${this.active?"active":""} ${this.allowHover?"allow-hover":""}`},h("div",{class:"outer-wrap",ref:t=>this.outerWrap=t},h("div",{class:"inner-wrap",onMouseDown:this.handleItemMouseDown.bind(this),onMouseUp:this.handleItemMouseUp.bind(this),onTouchStart:this.handleItemMouseDown.bind(this),onTouchEnd:this.handleItemMouseUp.bind(this)},this.hasCheckbox?h("zea-checkbox",{isRadio:this.hasRadio,checked:this.checked,ref:t=>this.checkboxElement=t}):null,h("slot",null),this.switch?h("zea-switch",{checked:this.checked}):null,this.hotkey?h("span",{class:"hotkey"},this.keyComboAsHtml()):null)))}get hostElement(){return getElement(this)}static get watchers(){return{rootMenu:["watchHandler"]}}};ZeaMenuItem.style=zeaMenuItemCss;export{ZeaMenuItem as zea_menu_item}