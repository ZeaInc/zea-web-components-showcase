import{r as t,h as e}from"./p-6fd09c7c.js";import{u as i}from"./p-c2a9f8c6.js";const s=class{constructor(e){t(this,e),this.onChange=this.onChange.bind(this),globalThis.zeaEngine||console.warn("`zeaEngine` missing from the `globalThis` object and this component requires it")}parameterChangeHandler(){this.setUpInput()}componentDidLoad(){this.parameter&&this.setUpInput()}setUpInput(){this.range=this.parameter.getRange(),this.step=this.parameter.getStep(),this.updateComponent(),this.parameter.on("valueChanged",()=>{this.updateComponent()})}updateComponent(){this.value=this.range?(this.parameter.getValue()-this.range[0])/(this.range[1]-this.range[0])*200:this.parameter.getValue()}onChange(){let t=this.round(this.inputField.valueAsNumber);this.range&&(t=this.range[0]+t/200*(this.range[1]-this.range[0]),t=this.clamp(t,this.range[0],this.range[1])),this.handleUXChange(t)}handleUXChange(t){if(!globalThis.zeaUx)return this.parameter.setValue(t),void console.log("To add Undo/Redo functionalities just add `zeaUx` library to your `globalThis` object, because right now it is missing.");const{UndoRedoManager:e,ParameterValueChange:i}=globalThis.zeaUx,s=e.getInstance(),r=new i(this.parameter,t);s.addChange(r)}round(t,e=6){return Number(Math.round(Number(t+"e"+e))+"e-"+e)}clamp(t,e,i){return Math.max(Math.min(t,Math.max(e,i)),Math.min(e,i))}render(){return e("div",{class:"zea-param-widget-number"},e("input",this.range?{onChange:this.onChange,ref:t=>this.inputField=t,class:"mdl-slider mdl-js-slider",type:"range",min:"0",max:"200",step:this.step?this.step:1,id:this.parameter.getName(),value:this.value,tabindex:"0"}:{onChange:this.onChange,ref:t=>this.inputField=t,type:"number",pattern:"-?[0-9]*(.[0-9]+)?",id:this.parameter.getName(),value:this.value,tabindex:"0"}))}static get watchers(){return{parameter:["parameterChangeHandler"]}}};i.registerWidget("zea-param-widget-number",t=>"Number"===t.getDataType()),s.style=":host,input,button,select,textarea{font-family:'Roboto', sans-serif}.zea-param-widget-number{color:var(--color-foreground-1);background-color:var(--color-background-2);max-width:400px}.user-edited{box-shadow:0 0 8px var(--color-success-1);margin:0px}.zea-param-widget-number input{width:100%;box-sizing:border-box;color:var(--color-foreground-1);background-color:var(--color-background-3)}input[type='number']{padding:0.3em;font-size:0.9em;border:1px solid var(--color-grey-3);text-align:right}";export{s as Z}