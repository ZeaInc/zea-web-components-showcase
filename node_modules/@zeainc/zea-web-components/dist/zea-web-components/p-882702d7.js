import{r as i,h as t}from"./p-6fd09c7c.js";import{u as o}from"./p-c2a9f8c6.js";import{i as s}from"./p-1212e539.js";const e=class{constructor(t){i(this,t),this.colorPickerHeight=200,globalThis.zeaEngine||console.warn("`zeaEngine` missing from the `globalThis` object and this component requires it")}handleWindowResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>this.resizeColorPicker(),500)}resizeColorPicker(){this.colorPicker.resize(this.container.offsetWidth,this.colorPickerHeight)}componentDidLoad(){this.setUpColorPicker(),this.parameter&&(this.parameter.on("valueChanged",()=>{this.updateComponent()}),this.updateComponent()),setTimeout(()=>window.dispatchEvent(new Event("resize")),1e3)}updateComponent(){this.parameterChange||(this.undoing=!0,this.colorPicker.color.rgb=this.parameter.getValue().getAsRGBDict(),this.undoing=!1,this.sampleColor=this.colorPicker.color.hslString,this.setSampleTextColor())}setSampleTextColor(){this.sampleTextColor=`hsl(1, 0%, ${100-this.colorPicker.color.hsl.l}%)`}setUpColorPicker(){this.colorPicker=s.ColorPicker(this.colorPickerContainer,{width:this.container.offsetWidth,height:this.colorPickerHeight,anticlockwise:!0,borderWidth:0,borderColor:"#fff",sliderHeight:"10px",padding:1,sliderMargin:4,handleRadius:4,layout:[{component:s.ui.Slider,options:{sliderType:"hue"}},{component:s.ui.Slider,options:{sliderType:"saturation"}},{component:s.ui.Slider,options:{}}]}),this.colorPicker.on("input:start",()=>{this.handleUXChange(this.parameter.getValue())}),this.colorPicker.on("input:end",()=>{this.parameterChange=void 0}),this.colorPicker.on("color:change",()=>{if(this.undoing)return;if(!globalThis.zeaEngine)return void console.log("`zeaEngine` missing from `globalThis` object.");const{Color:i}=globalThis.zeaEngine,t=new i;t.setFromRGBDict(this.colorPicker.color.rgb),this.sampleColor=this.colorPicker.color.hslString,this.setSampleTextColor(),this.handleUXChange(t)})}handleUXChange(i){if(!globalThis.zeaUx)return void console.log("To add Undo/Redo functionalities just add `zeaUx` library to your `globalThis` object, because right now it is missing.");const{UndoRedoManager:t,ParameterValueChange:o}=globalThis.zeaUx,s=t.getInstance();this.parameterChange?this.parameterChange.update({value:i}):(this.parameterChange=new o(this.parameter,i),s.addChange(this.parameterChange))}render(){return t("div",{ref:i=>this.container=i,class:"zea-param-widget-color"},t("div",{style:{color:this.sampleTextColor,backgroundColor:this.sampleColor},class:"color-sample"},this.sampleColor),t("div",{ref:i=>this.colorPickerContainer=i,class:"color-picker"}))}};o.registerWidget("zea-param-widget-color",i=>"Color"===i.getDataType()),e.style=":host,input,button,select,textarea{font-family:'Roboto', sans-serif}.zea-param-widget-color{color:var(--color-foreground-1)}.color-sample{height:30px;line-height:30px;border:1px solid var(--color-foreground-1);margin-bottom:0.5em;text-align:center;font-size:0.8em}";export{e as Z}