import{r as o,h as s}from"./p-6fd09c7c.js";const t=class{constructor(s){o(this,s),this.showImages=!0,this.initialZIndex=1e3,this.overflowLimit=5,this.overflowShown=!1,this.shownOverflowEntry=null}sessionChanged(){this.setupSession()}componentWillLoad(){setTimeout(()=>{this.setupSession()},500)}setupSession(){if(this.session&&"sub"in this.session){const o=[];for(let s in this.session.users)this.session.users.hasOwnProperty(s)&&o.push(this.session.users[s]);this.userDatas=o,this.session.sub("user-joined",o=>{this.userDatas.find(s=>s.id==o.id)||(this.userDatas=[o,...this.userDatas])}),this.session.sub("user-left",o=>{const s=this.userDatas.findIndex(s=>s.id==o.id);if(-1==s)return void console.warn("User id not in session:",o.id);const t=[...this.userDatas];t.splice(s,1),this.userDatas=t}),this.session.sub("userChanged",o=>{this.session.users[o.id]=o;const s=[];for(let o in this.session.users)this.session.users.hasOwnProperty(o)&&s.push(this.session.users[o]);this.userDatas=s})}else this.userDatas=[]}onChipClick(o){o.stopPropagation()}render(){if(!this.userDatas)return;const o=this.userDatas.slice(0,this.overflowLimit),t=this.userDatas.slice(this.overflowLimit);return s("div",{class:"zea-chip-set"},o&&o.map(o=>s("zea-user-chip",{showImages:this.showImages,key:o.id,userData:o,onClick:this.onChipClick.bind(this)})),t.length>0&&s("div",{class:"overflow"},s("div",{class:"overflow-thumb",onClick:o=>{this.overflowShown=!this.overflowShown,o.stopPropagation()}},["+"+(this.userDatas.length-this.overflowLimit),!this.overflowShown&&s("div",{class:"overflow-tooltip"},"Show All")]),s("div",{class:{"overflow-list":!0,shown:this.overflowShown}},t.map(o=>s("div",{key:o.id,class:{"overflow-entry":!0,shown:this.shownOverflowEntry==o.id},onClick:s=>{this.shownOverflowEntry!=o.id&&(this.shownOverflowEntry=o.id,s.currentTarget.scrollIntoView(),s.preventDefault(),s.stopPropagation())}},s("div",{class:"overflow-entry-collapser",onClick:s=>{this.shownOverflowEntry=this.shownOverflowEntry==o.id?null:o.id,s.currentTarget.scrollIntoView(),s.preventDefault(),s.stopPropagation()}},s("zea-icon",{name:this.shownOverflowEntry==o.id?"chevron-up-outline":"chevron-down-outline",size:14})),s("zea-user-card",{userData:o,collapsible:!1,density:this.shownOverflowEntry==o.id?"normal":"small"}))))))}static get watchers(){return{session:["sessionChanged"]}}};t.style=":host,input,button,select,textarea{font-family:'Roboto', sans-serif}.zea-chip-set{color:var(--color-foreground-1);display:flex;position:relative}zea-user-chip{margin-left:-8px;width:36px;height:36px;border:1px solid transparent;border-radius:19px}.overflow-thumb{border:2px solid var(--color-background-3);background-color:var(--color-background-3);width:36px;height:36px;color:var(--color-foreground-2);display:flex;align-items:center;justify-content:center;position:relative;font-size:13px;margin-left:-8px;border-radius:19px;box-sizing:border-box;user-select:none}.overflow-tooltip{position:absolute;top:35px;padding:4px 7px;border-radius:4px;font-size:12px;color:var(--color-foreground-1);background-color:var(--color-grey-3);z-index:10000;white-space:nowrap;display:none}.overflow-thumb:hover .overflow-tooltip{display:block}.overflow-list{max-height:calc(100vh - 60px);width:min-content;overflow-y:auto;background-color:var(--color-background-2);display:none}.overflow-list.shown{display:block;position:absolute}.overflow-list zea-user-card{display:block;}.overflow-entry{display:flex;align-items:stretch}.overflow-entry:hover{background-color:var(--color-grey-2)}.overflow-entry.shown:hover{background-color:transparent}.overflow-entry-collapser{margin:7px 3px 0 5px;width:30px;height:30px;justify-content:center;align-items:center;display:flex;background-color:transparent;border-radius:18px}.overflow-entry.shown .overflow-entry-collapser:hover{background-color:var(--color-grey-2)}";export{t as zea_user_chip_set}